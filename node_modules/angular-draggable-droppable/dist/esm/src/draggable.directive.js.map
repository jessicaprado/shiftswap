{"version":3,"file":"draggable.directive.js","sourceRoot":"","sources":["../../../src/draggable.directive.ts"],"names":[],"mappings":"OAAO,EACL,SAAS,EAET,UAAU,EACV,QAAQ,EACR,MAAM,EACN,YAAY,EACZ,KAAK,EAGL,MAAM,EAEP,MAAM,eAAe;OACf,EAAC,OAAO,EAAC,MAAM,cAAc;OAC7B,EAAC,UAAU,EAAC,MAAM,iBAAiB;OACnC,2BAA2B;OAC3B,uBAAuB;OACvB,4BAA4B;OAC5B,6BAA6B;OAC7B,wBAAwB;OACxB,4BAA4B;OAC5B,4BAA4B;OAC5B,yBAAyB;OACzB,EAAC,eAAe,EAAC,MAAM,4BAA4B;AAU1D,IAAM,WAAW,GAAW,MAAM,CAAC;AAGnC;IAyCE;;OAEG;IACH,mBACS,OAAmB,EAClB,QAAkB,EAClB,eAAgC,EAChC,IAAY;QAHb,YAAO,GAAP,OAAO,CAAY;QAClB,aAAQ,GAAR,QAAQ,CAAU;QAClB,oBAAe,GAAf,eAAe,CAAiB;QAChC,SAAI,GAAJ,IAAI,CAAQ;QA5CrB,aAAQ,GAAa,EAAC,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAC,CAAC;QAExC,iBAAY,GAAa,EAAE,CAAC;QAE5B,qBAAgB,GAAY,IAAI,CAAC;QAIjC,cAAS,GAA8B,IAAI,YAAY,EAAe,CAAC;QAEvE,aAAQ,GAA8B,IAAI,YAAY,EAAe,CAAC;QAEtE,YAAO,GAA8B,IAAI,YAAY,EAAe,CAAC;QAEtE;;WAEG;QACH,cAAS,GAAiB,IAAI,OAAO,EAAE,CAAC;QAExC;;WAEG;QACH,cAAS,GAAiB,IAAI,OAAO,EAAE,CAAC;QAExC;;WAEG;QACH,YAAO,GAAiB,IAAI,OAAO,EAAE,CAAC;QAE9B,+BAA0B,GAM9B,EAAE,CAAC;IAUJ,CAAC;IAEJ,4BAAQ,GAAR;QAAA,iBAsGC;QApGC,IAAI,CAAC,mBAAmB,EAAE,CAAC;QAE3B,IAAM,SAAS,GAAoB,IAAI,CAAC,SAAS;aAC9C,MAAM,CAAC,cAAM,OAAA,KAAI,CAAC,OAAO,EAAE,EAAd,CAAc,CAAC;aAC5B,OAAO,CAAC,UAAC,cAA0B;YAElC,KAAI,CAAC,IAAI,CAAC,GAAG,CAAC;gBACZ,KAAI,CAAC,SAAS,CAAC,IAAI,CAAC,EAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAC,CAAC,CAAC;YACpC,CAAC,CAAC,CAAC;YAEH,KAAI,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;YAE5B,IAAM,WAAW,GAAiB,IAAI,OAAO,EAAE,CAAC;YAEhD,KAAI,CAAC,eAAe,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;YAEnD,IAAM,SAAS,GAA4B,KAAI,CAAC,SAAS;iBACtD,GAAG,CAAC,UAAC,cAA0B;gBAE9B,cAAc,CAAC,cAAc,EAAE,CAAC;gBAEhC,MAAM,CAAC;oBACL,wBAAW;oBACX,CAAC,EAAE,cAAc,CAAC,OAAO,GAAG,cAAc,CAAC,OAAO;oBAClD,CAAC,EAAE,cAAc,CAAC,OAAO,GAAG,cAAc,CAAC,OAAO;oBAClD,OAAO,EAAE,cAAc,CAAC,OAAO;oBAC/B,OAAO,EAAE,cAAc,CAAC,OAAO;iBAChC,CAAC;YAEJ,CAAC,CAAC;iBACD,GAAG,CAAC,UAAC,QAAqB;gBAEzB,EAAE,CAAC,CAAC,KAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC;oBACxB,QAAQ,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,GAAG,KAAI,CAAC,YAAY,CAAC,CAAC,CAAC,GAAG,KAAI,CAAC,YAAY,CAAC,CAAC,CAAC;gBAClF,CAAC;gBAED,EAAE,CAAC,CAAC,KAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC;oBACxB,QAAQ,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,GAAG,KAAI,CAAC,YAAY,CAAC,CAAC,CAAC,GAAG,KAAI,CAAC,YAAY,CAAC,CAAC,CAAC;gBAClF,CAAC;gBAED,MAAM,CAAC,QAAQ,CAAC;YAClB,CAAC,CAAC;iBACD,GAAG,CAAC,UAAC,QAAqB;gBAEzB,EAAE,CAAC,CAAC,CAAC,KAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;oBACrB,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC;gBACjB,CAAC;gBAED,EAAE,CAAC,CAAC,CAAC,KAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;oBACrB,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC;gBACjB,CAAC;gBAED,MAAM,CAAC,QAAQ,CAAC;YAClB,CAAC,CAAC;iBACD,MAAM,CAAC,UAAC,EAAM;oBAAL,QAAC,EAAE,QAAC;gBAAM,OAAA,CAAC,KAAI,CAAC,YAAY,IAAI,KAAI,CAAC,YAAY,CAAC,EAAC,IAAC,EAAE,IAAC,EAAC,CAAC;YAA/C,CAA+C,CAAC;iBACnE,SAAS,CAAC,UAAU,CAAC,KAAK,CAAC,KAAI,CAAC,OAAO,EAAE,KAAI,CAAC,SAAS,CAAC,CAAC,CAAC;YAE7D,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,UAAC,EAAM;oBAAL,QAAC,EAAE,QAAC;gBACpC,KAAI,CAAC,IAAI,CAAC,GAAG,CAAC;oBACZ,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAC,IAAC,EAAE,IAAC,EAAC,CAAC,CAAC;gBAC5B,CAAC,CAAC,CAAC;gBACH,WAAW,CAAC,QAAQ,EAAE,CAAC;gBACvB,KAAI,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;gBAC3B,EAAE,CAAC,CAAC,KAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC;oBAC1B,KAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,KAAI,CAAC,OAAO,CAAC,aAAa,EAAE,eAAe,EAAE,IAAI,CAAC,CAAC;gBACnF,CAAC;YACH,CAAC,CAAC,CAAC;YAEH,MAAM,CAAC,SAAS,CAAC;QAEnB,CAAC,CAAC;aACD,KAAK,EAAE,CAAC;QAEX,UAAU;aACP,KAAK,CACJ,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,UAAA,KAAK,IAAI,OAAA,CAAC,EAAE,KAAK,CAAC,EAAT,CAAS,CAAC,EACzC,SAAS,CAAC,QAAQ,EAAE,CACrB;aACA,MAAM,CAAC,UAAC,EAAgB;gBAAf,gBAAQ,EAAE,YAAI;YACtB,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;gBACd,MAAM,CAAC,IAAI,CAAC;YACd,CAAC;YACD,MAAM,CAAC,QAAQ,CAAC,CAAC,KAAK,IAAI,CAAC,CAAC,IAAI,QAAQ,CAAC,CAAC,KAAK,IAAI,CAAC,CAAC,CAAC;QACxD,CAAC,CAAC;aACD,GAAG,CAAC,UAAC,EAAgB;gBAAf,gBAAQ,EAAE,YAAI;YAAM,OAAA,IAAI;QAAJ,CAAI,CAAC;aAC/B,SAAS,CAAC,UAAC,EAAqC;gBAApC,QAAC,EAAE,QAAC,EAAE,4BAAW,EAAE,oBAAO,EAAE,oBAAO;YAC9C,KAAI,CAAC,IAAI,CAAC,GAAG,CAAC;gBACZ,KAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAC,IAAC,EAAE,IAAC,EAAC,CAAC,CAAC;YAC7B,CAAC,CAAC,CAAC;YACH,EAAE,CAAC,CAAC,KAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC;gBAC1B,KAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,KAAI,CAAC,OAAO,CAAC,aAAa,EAAE,eAAe,EAAE,MAAM,CAAC,CAAC;YACrF,CAAC;YACD,KAAI,CAAC,eAAe,CAAC,eAAa,CAAC,YAAO,CAAC,QAAK,CAAC,CAAC;YAClD,WAAW,CAAC,IAAI,CAAC;gBACf,gBAAO;gBACP,gBAAO;gBACP,QAAQ,EAAE,KAAI,CAAC,QAAQ;aACxB,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;IAEP,CAAC;IAED,+BAAW,GAAX,UAAY,OAAsB;QAChC,EAAE,CAAC,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;YACxB,IAAI,CAAC,mBAAmB,EAAE,CAAC;QAC7B,CAAC;IACH,CAAC;IAED,+BAAW,GAAX;QACE,IAAI,CAAC,yBAAyB,EAAE,CAAC;QACjC,IAAI,CAAC,SAAS,CAAC,QAAQ,EAAE,CAAC;QAC1B,IAAI,CAAC,SAAS,CAAC,QAAQ,EAAE,CAAC;QAC1B,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;IAC1B,CAAC;IAEO,uCAAmB,GAA3B;QAAA,iBA+BC;QA7BC,IAAM,OAAO,GAAY,IAAI,CAAC,OAAO,EAAE,CAAC;QACxC,IAAM,iBAAiB,GAAY,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,0BAA0B,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC;QAE3F,EAAE,CAAC,CAAC,OAAO,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC;YAElC,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC;gBAE1B,KAAI,CAAC,0BAA0B,CAAC,SAAS,GAAG,KAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,KAAI,CAAC,OAAO,CAAC,aAAa,EAAE,WAAW,EAAE,UAAC,KAAiB;oBAC1H,KAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;gBAC1B,CAAC,CAAC,CAAC;gBAEH,KAAI,CAAC,0BAA0B,CAAC,OAAO,GAAG,KAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,UAAU,EAAE,SAAS,EAAE,UAAC,KAAiB;oBAC5G,KAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;gBACxB,CAAC,CAAC,CAAC;gBAEH,KAAI,CAAC,0BAA0B,CAAC,UAAU,GAAG,KAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,KAAI,CAAC,OAAO,CAAC,aAAa,EAAE,YAAY,EAAE;oBAC1G,KAAI,CAAC,YAAY,EAAE,CAAC;gBACtB,CAAC,CAAC,CAAC;gBAEH,KAAI,CAAC,0BAA0B,CAAC,UAAU,GAAG,KAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,KAAI,CAAC,OAAO,CAAC,aAAa,EAAE,YAAY,EAAE;oBAC1G,KAAI,CAAC,YAAY,EAAE,CAAC;gBACtB,CAAC,CAAC,CAAC;YAEL,CAAC,CAAC,CAAC;QAEL,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,OAAO,IAAI,iBAAiB,CAAC,CAAC,CAAC;YACzC,IAAI,CAAC,yBAAyB,EAAE,CAAC;QACnC,CAAC;IAEH,CAAC;IAEO,+BAAW,GAAnB,UAAoB,KAAiB;QAArC,iBAOC;QANC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,0BAA0B,CAAC,SAAS,CAAC,CAAC,CAAC;YAC/C,IAAI,CAAC,0BAA0B,CAAC,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,UAAU,EAAE,WAAW,EAAE,UAAC,KAAiB;gBAChH,KAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YAC7B,CAAC,CAAC,CAAC;QACL,CAAC;QACD,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAC7B,CAAC;IAEO,6BAAS,GAAjB,UAAkB,KAAiB;QACjC,EAAE,CAAC,CAAC,IAAI,CAAC,0BAA0B,CAAC,SAAS,CAAC,CAAC,CAAC;YAC9C,IAAI,CAAC,0BAA0B,CAAC,SAAS,EAAE,CAAC;YAC5C,OAAO,IAAI,CAAC,0BAA0B,CAAC,SAAS,CAAC;QACnD,CAAC;QACD,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAC3B,CAAC;IAEO,gCAAY,GAApB;QACE,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;IAC9B,CAAC;IAEO,gCAAY,GAApB;QACE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;IACvB,CAAC;IAEO,mCAAe,GAAvB,UAAwB,KAAa;QACnC,EAAE,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC;YAC1B,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,EAAE,WAAW,EAAE,KAAK,CAAC,CAAC;YAC9E,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,EAAE,mBAAmB,EAAE,KAAK,CAAC,CAAC;YACtF,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,EAAE,eAAe,EAAE,KAAK,CAAC,CAAC;YAClF,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,EAAE,gBAAgB,EAAE,KAAK,CAAC,CAAC;YACnF,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,EAAE,cAAc,EAAE,KAAK,CAAC,CAAC;QACnF,CAAC;IACH,CAAC;IAEO,2BAAO,GAAf;QACE,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;IAC5C,CAAC;IAEO,6BAAS,GAAjB,UAAkB,KAAa;QAC7B,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,EAAE,QAAQ,EAAE,KAAK,CAAC,CAAC;IAC7E,CAAC;IAEO,6CAAyB,GAAjC;QAAA,iBAKC;QAJC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,0BAA0B,CAAC,CAAC,OAAO,CAAC,UAAC,IAAY;YAChE,KAAI,CAAC,0BAA0B,CAAC,IAAI,CAAC,EAAE,CAAC;YACxC,OAAO,KAAI,CAAC,0BAA0B,CAAC,IAAI,CAAC,CAAC;QAC/C,CAAC,CAAC,CAAC;IACL,CAAC;IAEI,oBAAU,GAA0B;QAC3C,EAAE,IAAI,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC;oBACxB,QAAQ,EAAE,gBAAgB;iBAC3B,EAAG,EAAE;KACL,CAAC;IACF,kBAAkB;IACX,wBAAc,GAAmE,cAAM,OAAA;QAC9F,EAAC,IAAI,EAAE,UAAU,GAAG;QACpB,EAAC,IAAI,EAAE,QAAQ,GAAG;QAClB,EAAC,IAAI,EAAE,eAAe,GAAG;QACzB,EAAC,IAAI,EAAE,MAAM,GAAG;KACf,EAL6F,CAK7F,CAAC;IACK,wBAAc,GAA2C;QAChE,UAAU,EAAE,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,EAAE;QAC9B,UAAU,EAAE,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,EAAE;QAC9B,cAAc,EAAE,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,EAAE;QAClC,kBAAkB,EAAE,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,EAAE;QACtC,cAAc,EAAE,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,EAAE;QAClC,WAAW,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,EAAE;QAChC,UAAU,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,EAAE;QAC/B,SAAS,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,EAAE;KAC7B,CAAC;IACF,gBAAC;AAAD,CAAC,AAjRD,IAiRC","sourcesContent":["import {\n  Directive,\n  OnInit,\n  ElementRef,\n  Renderer,\n  Output,\n  EventEmitter,\n  Input,\n  OnDestroy,\n  OnChanges,\n  NgZone,\n  SimpleChanges\n} from '@angular/core';\nimport {Subject} from 'rxjs/Subject';\nimport {Observable} from 'rxjs/Observable';\nimport 'rxjs/add/observable/merge';\nimport 'rxjs/add/operator/map';\nimport 'rxjs/add/operator/mergeMap';\nimport 'rxjs/add/operator/takeUntil';\nimport 'rxjs/add/operator/take';\nimport 'rxjs/add/operator/takeLast';\nimport 'rxjs/add/operator/pairwise';\nimport 'rxjs/add/operator/share';\nimport {DraggableHelper} from './draggableHelper.provider';\n\nexport type Coordinates = {x: number, y: number};\n\nexport type DragAxis = {x: boolean, y: boolean};\n\nexport type SnapGrid = {x?: number, y?: number};\n\nexport type ValidateDrag = (coordinates: Coordinates) => boolean;\n\nconst MOVE_CURSOR: string = 'move';\n\n\nexport class Draggable implements OnInit, OnChanges, OnDestroy {\n\n   dropData: any;\n\n   dragAxis: DragAxis = {x: true, y: true};\n\n   dragSnapGrid: SnapGrid = {};\n\n   ghostDragEnabled: boolean = true;\n\n   validateDrag: ValidateDrag;\n\n   dragStart: EventEmitter<Coordinates> = new EventEmitter<Coordinates>();\n\n   dragging: EventEmitter<Coordinates> = new EventEmitter<Coordinates>();\n\n   dragEnd: EventEmitter<Coordinates> = new EventEmitter<Coordinates>();\n\n  /**\n   * @hidden\n   */\n  mouseDown: Subject<any> = new Subject();\n\n  /**\n   * @hidden\n   */\n  mouseMove: Subject<any> = new Subject();\n\n  /**\n   * @hidden\n   */\n  mouseUp: Subject<any> = new Subject();\n\n  private eventListenerSubscriptions: {\n    mousemove?: Function,\n    mousedown?: Function,\n    mouseup?: Function,\n    mouseenter?: Function,\n    mouseleave?: Function\n  } = {};\n\n  /**\n   * @hidden\n   */\n  constructor(\n    public element: ElementRef,\n    private renderer: Renderer,\n    private draggableHelper: DraggableHelper,\n    private zone: NgZone\n  ) {}\n\n  ngOnInit(): void {\n\n    this.checkEventListeners();\n\n    const mouseDrag: Observable<any> = this.mouseDown\n      .filter(() => this.canDrag())\n      .flatMap((mouseDownEvent: MouseEvent) => {\n\n        this.zone.run(() => {\n          this.dragStart.next({x: 0, y: 0});\n        });\n\n        this.setCursor(MOVE_CURSOR);\n\n        const currentDrag: Subject<any> = new Subject();\n\n        this.draggableHelper.currentDrag.next(currentDrag);\n\n        const mouseMove: Observable<Coordinates> = this.mouseMove\n          .map((mouseMoveEvent: MouseEvent) => {\n\n            mouseMoveEvent.preventDefault();\n\n            return {\n              currentDrag,\n              x: mouseMoveEvent.clientX - mouseDownEvent.clientX,\n              y: mouseMoveEvent.clientY - mouseDownEvent.clientY,\n              clientX: mouseMoveEvent.clientX,\n              clientY: mouseMoveEvent.clientY\n            };\n\n          })\n          .map((moveData: Coordinates) => {\n\n            if (this.dragSnapGrid.x) {\n              moveData.x = Math.floor(moveData.x / this.dragSnapGrid.x) * this.dragSnapGrid.x;\n            }\n\n            if (this.dragSnapGrid.y) {\n              moveData.y = Math.floor(moveData.y / this.dragSnapGrid.y) * this.dragSnapGrid.y;\n            }\n\n            return moveData;\n          })\n          .map((moveData: Coordinates) => {\n\n            if (!this.dragAxis.x) {\n              moveData.x = 0;\n            }\n\n            if (!this.dragAxis.y) {\n              moveData.y = 0;\n            }\n\n            return moveData;\n          })\n          .filter(({x, y}) => !this.validateDrag || this.validateDrag({x, y}))\n          .takeUntil(Observable.merge(this.mouseUp, this.mouseDown));\n\n        mouseMove.takeLast(1).subscribe(({x, y}) => {\n          this.zone.run(() => {\n            this.dragEnd.next({x, y});\n          });\n          currentDrag.complete();\n          this.setCssTransform(null);\n          if (this.ghostDragEnabled) {\n            this.renderer.setElementStyle(this.element.nativeElement, 'pointerEvents', null);\n          }\n        });\n\n        return mouseMove;\n\n      })\n      .share();\n\n    Observable\n      .merge(\n        mouseDrag.take(1).map(value => [, value]),\n        mouseDrag.pairwise()\n      )\n      .filter(([previous, next]) => {\n        if (!previous) {\n          return true;\n        }\n        return previous.x !== next.x || previous.y !== next.y;\n      })\n      .map(([previous, next]) => next)\n      .subscribe(({x, y, currentDrag, clientX, clientY}) => {\n        this.zone.run(() => {\n          this.dragging.next({x, y});\n        });\n        if (this.ghostDragEnabled) {\n          this.renderer.setElementStyle(this.element.nativeElement, 'pointerEvents', 'none');\n        }\n        this.setCssTransform(`translate(${x}px, ${y}px)`);\n        currentDrag.next({\n          clientX,\n          clientY,\n          dropData: this.dropData\n        });\n      });\n\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes['dragAxis']) {\n      this.checkEventListeners();\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.unsubscribeEventListeners();\n    this.mouseDown.complete();\n    this.mouseMove.complete();\n    this.mouseUp.complete();\n  }\n\n  private checkEventListeners(): void {\n\n    const canDrag: boolean = this.canDrag();\n    const hasEventListeners: boolean = Object.keys(this.eventListenerSubscriptions).length > 0;\n\n    if (canDrag && !hasEventListeners) {\n\n      this.zone.runOutsideAngular(() => {\n\n        this.eventListenerSubscriptions.mousedown = this.renderer.listen(this.element.nativeElement, 'mousedown', (event: MouseEvent) => {\n          this.onMouseDown(event);\n        });\n\n        this.eventListenerSubscriptions.mouseup = this.renderer.listenGlobal('document', 'mouseup', (event: MouseEvent) => {\n          this.onMouseUp(event);\n        });\n\n        this.eventListenerSubscriptions.mouseenter = this.renderer.listen(this.element.nativeElement, 'mouseenter', () => {\n          this.onMouseEnter();\n        });\n\n        this.eventListenerSubscriptions.mouseleave = this.renderer.listen(this.element.nativeElement, 'mouseleave', () => {\n          this.onMouseLeave();\n        });\n\n      });\n\n    } else if (!canDrag && hasEventListeners) {\n      this.unsubscribeEventListeners();\n    }\n\n  }\n\n  private onMouseDown(event: MouseEvent): void {\n    if (!this.eventListenerSubscriptions.mousemove) {\n      this.eventListenerSubscriptions.mousemove = this.renderer.listenGlobal('document', 'mousemove', (event: MouseEvent) => {\n        this.mouseMove.next(event);\n      });\n    }\n    this.mouseDown.next(event);\n  }\n\n  private onMouseUp(event: MouseEvent): void {\n    if (this.eventListenerSubscriptions.mousemove) {\n      this.eventListenerSubscriptions.mousemove();\n      delete this.eventListenerSubscriptions.mousemove;\n    }\n    this.mouseUp.next(event);\n  }\n\n  private onMouseEnter(): void {\n    this.setCursor(MOVE_CURSOR);\n  }\n\n  private onMouseLeave(): void {\n    this.setCursor(null);\n  }\n\n  private setCssTransform(value: string): void {\n    if (this.ghostDragEnabled) {\n      this.renderer.setElementStyle(this.element.nativeElement, 'transform', value);\n      this.renderer.setElementStyle(this.element.nativeElement, '-webkit-transform', value);\n      this.renderer.setElementStyle(this.element.nativeElement, '-ms-transform', value);\n      this.renderer.setElementStyle(this.element.nativeElement, '-moz-transform', value);\n      this.renderer.setElementStyle(this.element.nativeElement, '-o-transform', value);\n    }\n  }\n\n  private canDrag(): boolean {\n    return this.dragAxis.x || this.dragAxis.y;\n  }\n\n  private setCursor(value: string): void {\n    this.renderer.setElementStyle(this.element.nativeElement, 'cursor', value);\n  }\n\n  private unsubscribeEventListeners(): void {\n    Object.keys(this.eventListenerSubscriptions).forEach((type: string) => {\n      this.eventListenerSubscriptions[type]();\n      delete this.eventListenerSubscriptions[type];\n    });\n  }\n\nstatic decorators: DecoratorInvocation[] = [\n{ type: Directive, args: [{\n  selector: '[mwlDraggable]'\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: ElementRef, },\n{type: Renderer, },\n{type: DraggableHelper, },\n{type: NgZone, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'dropData': [{ type: Input },],\n'dragAxis': [{ type: Input },],\n'dragSnapGrid': [{ type: Input },],\n'ghostDragEnabled': [{ type: Input },],\n'validateDrag': [{ type: Input },],\n'dragStart': [{ type: Output },],\n'dragging': [{ type: Output },],\n'dragEnd': [{ type: Output },],\n};\n}\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}